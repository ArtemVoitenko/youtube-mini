(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(21),o=a.n(r),l=a(18),s=a(11),i=a(4),u=a(20),d=a(23),m={searchResults:null,playVideoInfo:null,playVideoId:null,watchedVideos:null,Intl:{locale:null}},h=Object(u.b)(Object.assign({reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VIDEOS_RETURNED":return Object(d.a)({},e,{searchResults:t.payload});case"PLAY_VIDEO":return Object(d.a)({},e,{playVideoId:t.payload});case"GET_WATCHED_VIDEOS":return Object(d.a)({},e,{watchedVideos:t.payload});default:return e}}},{Intl:i.IntlReducer})),p=Object(u.c)(h,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),g=a(6),v=a(9),f=a(12),E=a(10),y=a(13),b=a(17),_=(a(62),Object(i.withTranslate)(function(e){var t=e.removeWatchedVideo,a=e.onPlayWatchedVideo,n=e.watchedVideos,r=e.translate,o=e.activeVideo;return c.a.createElement("div",{className:"sidebar"},c.a.createElement("p",{className:"sidebar__title"},r("watchedTitle")),n?c.a.createElement("ul",{className:"watched"},Object(b.a)(n).reverse().map(function(e){return c.a.createElement("li",{key:e.id,className:"watched__item ".concat(o==e.id?"active":""),onClick:function(){a(e.id)}},c.a.createElement("img",{src:e.thumb,alt:e.title,className:"watched__thumb"}),c.a.createElement("p",{className:"watched__title"},e.title),c.a.createElement("button",{className:"watched__remove",onClick:function(a){a.stopPropagation(),t(e.id)}},r("remove")))})):c.a.createElement("p",{className:"sidebar__message"},r("watchedEmpty")))})),O=a(42),V=(a(74),function(e){var t=e.videoId;return c.a.createElement("div",{className:"video-player__wrapper"},c.a.createElement(O.a,{videoId:t,className:"video-player__iframe",containerClassName:"video-player",opts:{height:"780",width:"1280",playerVars:{autoplay:1}}}))}),w=a(27),S=a.n(w),N=a(45),j=c.a.createContext(),I=j.Provider,k=j.Consumer,C=function(){return function(e){return function(t){return c.a.createElement(k,null,function(a){return c.a.createElement(e,Object.assign({},t,{youtubeService:a}))})}}},T=(a(76),function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(c)))).state={query:""},a.onSearchInput=function(){var e=Object(N.a)(S.a.mark(function e(t){var n,c;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,a.setState({query:n}),!(n.length>3)){e.next=9;break}return e.next=5,a.getVideos(n);case 5:c=e.sent,a.props.onSearch(c),e.next=10;break;case 9:a.props.onSearch(null);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getVideos=function(e){return a.props.youtubeService.requestVideos(e)},a}return Object(y.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props.translate,t=this.state.query;return c.a.createElement("div",{className:"search"},c.a.createElement("input",{type:"text",className:"search__input",onChange:this.onSearchInput,onFocus:this.onSearchInput,value:t,placeholder:e("searchPlaceholder")}))}}]),t}(n.Component)),L=C()(Object(i.withTranslate)(T)),x=(a(77),Object(i.withTranslate)(function(e){var t=e.id,a=e.title,n=e.thumb,r=(e.votes,e.playVideo),o=e.translate;return c.a.createElement("div",{className:"search-item"},c.a.createElement("img",{src:n,alt:a,className:"search-item__thumb"}),c.a.createElement("p",{className:"search-item__title"},a),c.a.createElement("button",{className:"search-item__play",onClick:function(){r({id:t,thumb:n,title:a})}},o("play")))})),D=function(e){var t=e.results,a=e.playVideo;return c.a.createElement("div",{className:"search-results"},t.map(function(e){return c.a.createElement(x,{key:e.id.videoId,id:e.id.videoId,title:e.snippet.title,thumb:e.snippet.thumbnails.default.url,votes:1,playVideo:a})}))},R=(a(78),a(46)),P=a.n(R),A=function(e){var t=e.icon,a=e.iconClass;return c.a.createElement("i",{className:a},c.a.createElement("svg",{viewBox:"0 0 16 16"},c.a.createElement("use",{xlinkHref:"".concat(P.a,"#").concat(t)})))},W=(a(79),function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(c)))).state={dropdownVisible:!1},a.setLanguageToStorage=function(e){a.setState({dropdownVisible:!1});for(var t=e.target;!t.dataset.locale;)t=t.parentNode;var n=t.dataset.locale;localStorage.setItem("lang",JSON.stringify(n))},a.toggleLanguagesDropdown=function(){a.setState(function(e){return{dropdownVisible:!e.dropdownVisible}})},a}return Object(y.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props.activeLanguage,t=this.state.dropdownVisible;return c.a.createElement("div",{className:"languages"},c.a.createElement("button",{onClick:this.toggleLanguagesDropdown,class:"languages__button ".concat(t?"active":"")},c.a.createElement(A,{iconClass:"languages__icon",icon:e}),e),c.a.createElement("div",{className:"languages__dropdown ".concat(t?"active":"")},c.a.createElement(s.b,{className:"languages__link",onClick:this.setLanguageToStorage,"data-locale":"ru",to:"/ru"},c.a.createElement(A,{"data-locale":"ru",iconClass:"languages__icon",icon:"ru"})," ru"),c.a.createElement(s.b,{className:"languages__link",onClick:this.setLanguageToStorage,"data-locale":"en",to:"/"},c.a.createElement(A,{"data-locale":"en",iconClass:"languages__icon",icon:"en"})," en")))}}]),t}(n.Component)),J=(a(81),function(e){var t=e.onSearch,a=e.results,n=e.playVideo,r=e.activeLanguage,o=a?c.a.createElement(D,{results:a,playVideo:n}):null;return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"header__wrapper"},c.a.createElement("div",{className:"logo"},c.a.createElement(A,{icon:"youtube",iconClass:"logo__icon"}),"You-mini"),c.a.createElement("div",{className:"header__search"},c.a.createElement(L,{onSearch:t}),o),c.a.createElement(W,{activeLanguage:r}))))}),B=(a(82),function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(c)))).onSearch=function(e){a.props.setSearchResults(e)},a.onPlayVideo=function(e){a.props.playVideo(e.id),a.props.setSearchResults(null),a.setPlayedVideoToStorage(e)},a.setPlayedVideoToStorage=function(e){var t=a.getVideosFromStorage();if(!a.isElementExists(e,t)){if(t&&t.length>=5){var n=t.slice(1,5);a.setItemsToLocalStorage(e,n)}else t&&t.length>0?a.setItemsToLocalStorage(e,t):a.setItemsToLocalStorage(e);a.props.saveWatched(a.getVideosFromStorage())}},a.removeWatchedVideo=function(e){var t=a.getVideosFromStorage(),n=a.findVideoById(t,e),c=[].concat(Object(b.a)(t.slice(0,n)),Object(b.a)(t.slice(n+1)));localStorage.setItem("watchedVideos",JSON.stringify(c)),a.props.saveWatched(c)},a.getVideosFromStorage=function(){return JSON.parse(localStorage.getItem("watchedVideos"))},a.isElementExists=function(e,t){return!!t&&-1!=t.findIndex(function(t){return t.id===e.id})},a.setItemsToLocalStorage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];localStorage.setItem("watchedVideos",JSON.stringify([].concat(Object(b.a)(t),[e])))},a.findVideoById=function(e,t){return e.findIndex(function(e){return e.id===t})},a}return Object(y.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.saveWatched,a=e.setLocale,n=e.lang;t(this.getVideosFromStorage()),a(n)}},{key:"render",value:function(){var e=this.props,t=e.searchResults,a=e.playVideo,r=e.playVideoId,o=e.watchedVideos,l=e.lang;return c.a.createElement(n.Fragment,null,c.a.createElement(J,{results:t,playVideo:this.onPlayVideo,activeLanguage:l,onSearch:this.onSearch}),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"content"},c.a.createElement(_,{onPlayWatchedVideo:a,removeWatchedVideo:this.removeWatchedVideo,watchedVideos:o,activeVideo:r}),c.a.createElement(V,{videoId:r}))))}}]),t}(n.Component)),F=Object(l.connect)(function(e){var t=e.reducer;return{searchResults:t.searchResults,playVideoId:t.playVideoId,watchedVideos:t.watchedVideos}},function(e){return{setSearchResults:function(t){e({type:"VIDEOS_RETURNED",payload:t})},playVideo:function(t){e(function(e){return{type:"PLAY_VIDEO",payload:e}}(t))},saveWatched:function(t){e(function(e){return{type:"GET_WATCHED_VIDEOS",payload:e}}(t))},setLocale:function(t){e(i.IntlActions.setLocale(t))}}})(B),q=a(15),G=(a(83),function(){var e=function(e){var t=e.target.dataset.locale;localStorage.setItem("lang",JSON.stringify(t))};return c.a.createElement("div",{className:"languages-block"},c.a.createElement(s.b,{className:"languages-block__link",onClick:e,"data-locale":"ru",to:"/ru"},c.a.createElement(A,{"data-locale":"ru",iconClass:"languages-block__icon",icon:"ru"})," ","Russian"),c.a.createElement(s.b,{className:"languages-block__link",onClick:e,"data-locale":"en",to:"/"},c.a.createElement(A,{"data-locale":"en",iconClass:"languages-block__icon",icon:"en"})," ","English"))}),U=(a(84),a(85),function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(c)))).checkActiveLanguage=function(){var e=JSON.parse(localStorage.getItem("lang")),t=a.props.history;e?"ru"==e?t.push("/ru"):t.push("/"):t.push("/langs")},a}return Object(y.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.checkActiveLanguage()}},{key:"render",value:function(){return c.a.createElement(n.Fragment,null,c.a.createElement(q.a,{exact:!0,path:"/ru",render:function(){return c.a.createElement(F,{lang:"ru"})}}),c.a.createElement(q.a,{exact:!0,path:"/",render:function(){return c.a.createElement(F,{lang:"en"})}}),c.a.createElement(q.a,{exact:!0,path:"/langs",component:G}))}}]),t}(n.Component)),X=Object(q.e)(U),H=function(){return c.a.createElement("div",{className:"error-indicator"},"Error!!!!!")},Y=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(c)))).state={hasError:!1},a}return Object(y.a)(t,e),Object(v.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?c.a.createElement(H,null):this.props.children}}]),t}(n.Component),z=a(86),M={en:{locale:"/",messages:{searchPlaceholder:"Type at least 4 symbols to search",watchedTitle:"Watched videos",watchedEmpty:"List is empty",play:"Play",remove:"Remove",locale:"/"}},ru:{locale:"/ru",messages:{searchPlaceholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043c\u0438\u043d\u0438\u043c\u0443\u043c 4 \u0441\u0438\u043c\u0432\u043e\u043b\u0430 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430",watchedTitle:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043d\u044b\u0435 \u0432\u0438\u0434\u0435\u043e",watchedEmpty:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442",play:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",remove:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",locale:"/ru"}}},K=new function e(){var t=this;Object(g.a)(this,e),this._apiSearchBase="https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=5&type=video&key=AIzaSyCdB1wyB8GzS0At7xWSKldGm7O7oxJiNZ0&q=",this.requestVideos=function(e){return z({method:"get",url:"".concat(t._apiSearchBase).concat(e)}).then(function(e){return JSON.parse(e.request.response).items})}};o.a.render(c.a.createElement(l.Provider,{store:p},c.a.createElement(i.IntlProvider,{translations:M,locale:"en"},c.a.createElement(Y,null,c.a.createElement(I,{value:K},c.a.createElement(s.a,null,c.a.createElement(X,null)))))),document.getElementById("root"))},46:function(e,t,a){e.exports=a.p+"static/media/sprite.ebbcac6c.svg"},48:function(e,t,a){e.exports=a(103)},62:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},85:function(e,t,a){}},[[48,1,2]]]);